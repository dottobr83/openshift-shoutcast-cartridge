openshift-shoutcast-cartridge
=============================

Shoutcast Distribution for Openshift Cloud Apps

Concept
-------

Streaming service with (not yet functional) scaling capabilities, simple one line installation:

(My experimental version)
rhc app-create <app-name> http://shoutscale-rightoradio.rhcloud.com/manifest/master

or from this repo:
rhc app-create <app-name> https://github.com/theunknownartisthour/openshift-shoutcast-cartridge

Approach to scaling:
--------------------

Each gear or node hosts a distribution of shoutcast each with a modifiable configuration.
The first gear or node hosts shoutcast and acts as the primary relay point for other nodes.
The configuration is generated by environment variables which will always properly connect
shoutcast.

For example:
RelayPort=80
RelayServer=IP/URL

Vs the primary node:
portbase=${OPENSHIFT_SCS_PORT}
destip=${OPENSHIFT_SCS_IP}
publicip=${OPENSHIFT_APP_DNS}

The gears are address based on the least amount of connections as determined by the standard
haproxy which can be added by using the --scaling option to the command lines above.

Current issues: 
---------------
Creating a url endpoint to the first node which bypasses haproxy.
Changing haproxy's configuration to avoid initial conflicts between haproxy's health check at the backend /
The issue is that this get requests the stream before there's a stream availalble, shoutcast responds with an http error
haproxy then closes outside connections from reaching the backend.

Currently this isn't an issue if users don't mind port-forwarding into shoutcast, but this prevents normal access to
shoutcast.
rhc port-forward <app-name>

Thank you's so far:
-------------------

Credit to this guy, who inpired to to make a diy:
http://blog.piratelufi.com/2013/11/use-openshift-as-a-free-shoutcast-server/

Then whoever put together this, because now I have a little understanding of what I'm doing:
http://openshift.github.io/documentation/oo_cartridge_developers_guide.html

Plus a thank you to the overcontributor DrO for debugging some shoutcast configs:
http://forums.winamp.com
